<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-10-31T00:09:56.3552949"><title>Update User Profile Screen (UpdateUserProfileScreen.kt) | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"},{"id":"code-explanation","level":0,"title":"Code Explanation","anchor":"#code-explanation"},{"id":"related-files","level":0,"title":"Related Files","anchor":"#related-files"},{"id":"usage","level":0,"title":"Usage","anchor":"#usage"},{"id":"additional-notes","level":0,"title":"Additional Notes","anchor":"#additional-notes"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Update User Profile Screen (UpdateUserProfileScreen.kt) | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/updateuserprofilescreen.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Update User Profile Screen (UpdateUserProfileScreen.kt) | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/updateuserprofilescreen.html#webpage",
    "url": "writerside-documentation/updateuserprofilescreen.html",
    "name": "Update User Profile Screen (UpdateUserProfileScreen.kt) | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="UpdateUserProfileScreen" data-main-title="Update User Profile Screen (UpdateUserProfileScreen.kt)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="reference///app///ui///screens///profile"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="UpdateUserProfileScreen" id="UpdateUserProfileScreen.md">Update User Profile Screen (UpdateUserProfileScreen.kt)</h1><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="sjl24x_8">This file defines the update user profile screen component for the application. The screen allows users to update their profile information such as their display name and profile picture URL. It utilizes Jetpack Compose to create a responsive and interactive UI. The update process is managed by <code class="code" id="sjl24x_9">AuthViewModel</code>.</p></section><section class="chapter"><h2 id="code-explanation" data-toc="code-explanation">Code Explanation</h2><section class="chapter"><h3 id="breakdown" data-toc="breakdown">Breakdown</h3><ul class="list _bullet" id="sjl24x_11"><li class="list__item" id="sjl24x_12"><p id="sjl24x_23"><span class="control" id="sjl24x_25"><code class="code" id="sjl24x_26">@Composable fun UpdateUserProfileScreen(navController: NavHostController, authViewModel: AuthViewModel)</code></span></p><ul class="list _bullet" id="sjl24x_24"><li class="list__item" id="sjl24x_27"><p>Defines the update user profile screen as a composable function.</p></li><li class="list__item" id="sjl24x_28"><p>Parameters: </p><ul class="list _bullet" id="sjl24x_29"><li class="list__item" id="sjl24x_30"><p><code class="code" id="sjl24x_32">navController</code>: The navigation controller to manage app navigation.</p></li><li class="list__item" id="sjl24x_31"><p><code class="code" id="sjl24x_33">authViewModel</code>: The view model that handles authentication and profile updates.</p></li></ul></li></ul></li><li class="list__item" id="sjl24x_13"><p id="sjl24x_34"><span class="control" id="sjl24x_36">State Variables</span></p><ul class="list _bullet" id="sjl24x_35"><li class="list__item" id="sjl24x_37"><p><span class="control" id="sjl24x_43"><code class="code" id="sjl24x_44">val currentProfile = authViewModel.getCurrentUserProfile()</code></span>: Retrieves the current user's profile.</p></li><li class="list__item" id="sjl24x_38"><p><span class="control" id="sjl24x_45"><code class="code" id="sjl24x_46">var displayName by remember { mutableStateOf(currentProfile?.displayName ?: &quot;&quot;) }</code></span>: Holds the display name input value.</p></li><li class="list__item" id="sjl24x_39"><p><span class="control" id="sjl24x_47"><code class="code" id="sjl24x_48">var photoUrl by remember { mutableStateOf(currentProfile?.photoUrl ?: &quot;&quot;) }</code></span>: Holds the photo URL input value.</p></li><li class="list__item" id="sjl24x_40"><p><span class="control" id="sjl24x_49"><code class="code" id="sjl24x_50">var showError by remember { mutableStateOf(false) }</code></span>: Flag to show or hide error messages.</p></li><li class="list__item" id="sjl24x_41"><p><span class="control" id="sjl24x_51"><code class="code" id="sjl24x_52">var errorMessage by remember { mutableStateOf(&quot;&quot;) }</code></span>: Stores the error message text.</p></li><li class="list__item" id="sjl24x_42"><p><span class="control" id="sjl24x_53"><code class="code" id="sjl24x_54">var isUpdating by remember { mutableStateOf(false) }</code></span>: Flag to indicate if the update process is ongoing.</p></li></ul></li><li class="list__item" id="sjl24x_14"><p id="sjl24x_55"><span class="control" id="sjl24x_57"><code class="code" id="sjl24x_58">Box(modifier = Modifier.fillMaxSize().background(MaterialTheme.colorScheme.background))</code></span></p><ul class="list _bullet" id="sjl24x_56"><li class="list__item" id="sjl24x_59"><p>Root container that fills the available space and sets the background color.</p></li></ul></li><li class="list__item" id="sjl24x_15"><p id="sjl24x_60"><span class="control" id="sjl24x_62"><code class="code" id="sjl24x_63">IconButton(onClick = { navController.popBackStack() }, modifier = Modifier.padding(16.dp).align(Alignment.TopStart))</code></span></p><ul class="list _bullet" id="sjl24x_61"><li class="list__item" id="sjl24x_64"><p>Back button to navigate back to the previous screen.</p></li><li class="list__item" id="sjl24x_65"><p>Displays an arrow icon.</p></li></ul></li><li class="list__item" id="sjl24x_16"><p id="sjl24x_66"><span class="control" id="sjl24x_68"><code class="code" id="sjl24x_69">Column(modifier = Modifier.fillMaxSize().padding(top = 56.dp, start = 16.dp, end = 16.dp, bottom = 16.dp), ...)</code></span></p><ul class="list _bullet" id="sjl24x_67"><li class="list__item" id="sjl24x_70"><p>Vertical layout container that holds the update profile elements.</p></li><li class="list__item" id="sjl24x_71"><p>Centers its children horizontally and arranges them with spaces.</p></li></ul></li><li class="list__item" id="sjl24x_17"><p id="sjl24x_72"><span class="control" id="sjl24x_74"><code class="code" id="sjl24x_75">Text(&quot;Update Profile&quot;, style = MaterialTheme.typography.headlineMedium, ...)</code></span></p><ul class="list _bullet" id="sjl24x_73"><li class="list__item" id="sjl24x_76"><p>Title text for the update profile screen.</p></li><li class="list__item" id="sjl24x_77"><p>Uses a medium headline style and bold font weight.</p></li></ul></li><li class="list__item" id="sjl24x_18"><p id="sjl24x_78"><span class="control" id="sjl24x_80"><code class="code" id="sjl24x_81">Card(modifier = Modifier.fillMaxWidth().padding(vertical = 16.dp), ...)</code></span></p><ul class="list _bullet" id="sjl24x_79"><li class="list__item" id="sjl24x_82"><p>Displays the input fields for display name and photo URL.</p></li><li class="list__item" id="sjl24x_83"><p>Parameters: </p><ul class="list _bullet" id="sjl24x_84"><li class="list__item" id="sjl24x_85"><p><code class="code" id="sjl24x_88">modifier</code>: Sets the width and vertical padding of the card.</p></li><li class="list__item" id="sjl24x_86"><p><code class="code" id="sjl24x_89">elevation</code>: Sets the card elevation for shadow effect, using <code class="code" id="sjl24x_90">CardDefaults.cardElevation</code>.</p></li><li class="list__item" id="sjl24x_87"><p><code class="code" id="sjl24x_91">shape</code>: Sets the shape of the card with rounded corners.</p></li></ul></li></ul></li><li class="list__item" id="sjl24x_19"><p id="sjl24x_92"><span class="control" id="sjl24x_94"><code class="code" id="sjl24x_95">Column(modifier = Modifier.fillMaxWidth().padding(24.dp), verticalArrangement = Arrangement.spacedBy(16.dp))</code></span></p><ul class="list _bullet" id="sjl24x_93"><li class="list__item" id="sjl24x_96"><p>Inner vertical layout within the card for input fields and buttons.</p></li><li class="list__item" id="sjl24x_97"><p>Arranges its children with spaced margins.</p></li></ul></li><li class="list__item" id="sjl24x_20"><p id="sjl24x_98"><span class="control" id="sjl24x_100"><code class="code" id="sjl24x_101">ProfileTextField(value = displayName, onValueChange = { displayName = it }, label = &quot;Username&quot;, icon)</code></span></p><ul class="list _bullet" id="sjl24x_99"><li class="list__item" id="sjl24x_102"><p>Input field for the display name, utilizing a custom <code class="code" id="sjl24x_104">ProfileTextField</code> composable.</p></li><li class="list__item" id="sjl24x_103"><p>Displays a person icon.</p></li></ul></li><li class="list__item" id="sjl24x_21"><p id="sjl24x_105"><span class="control" id="sjl24x_107"><code class="code" id="sjl24x_108">ProfileTextField(value = photoUrl, onValueChange = { photoUrl = it }, label = &quot;Photo URL&quot;, icon)</code></span></p><ul class="list _bullet" id="sjl24x_106"><li class="list__item" id="sjl24x_109"><p>Input field for the photo URL, utilizing a custom <code class="code" id="sjl24x_111">ProfileTextField</code> composable.</p></li><li class="list__item" id="sjl24x_110"><p>Displays a face icon.</p></li></ul></li><li class="list__item" id="sjl24x_22"><p id="sjl24x_112"><span class="control" id="sjl24x_114"><code class="code" id="sjl24x_115">Button(onClick = { isUpdating = true }, enabled = !isUpdating)</code></span></p><ul class="list _bullet" id="sjl24x_113"><li class="list__item" id="sjl24x_116"><p>Update button.</p></li><li class="list__item" id="sjl24x_117"><p>Starts the update process when clicked.</p></li><li class="list__item" id="sjl24x_118"><p>Disabled while <code class="code" id="sjl24x_119">isUpdating</code> is true to prevent multiple submissions.</p></li></ul></li></ul></section></section><section class="chapter"><h2 id="related-files" data-toc="related-files">Related Files</h2><ul class="list _bullet" id="sjl24x_120"><li class="list__item" id="sjl24x_121"><p><span class="control" id="sjl24x_124"><a href="authviewmodel.html" id="sjl24x_125" data-tooltip="This file defines the AuthViewModel class, which handles user authentication and profile management. It interacts with Firebase Authentication to perform actions such as sign-in, sign-out, user creation, and profile updates. The class utilizes Kotlin Coroutines and StateFlow to…">AuthViewModel.kt</a>:</span> Manages user authentication and handles profile updates.</p></li><li class="list__item" id="sjl24x_122"><p><span class="control" id="sjl24x_126"><a href="navgraph.html" id="sjl24x_127" data-tooltip="This file defines the navigation graph for the application, which controls the navigation flow between different screens. It uses Jetpack Compose's Navigation component to manage the navigation stack and transitions.">NavGraph.kt</a>:</span> Defines the navigation routes, including the update profile screen.</p></li><li class="list__item" id="sjl24x_123"><p><span class="control" id="sjl24x_128"><a href="userprofilescreen.html" id="sjl24x_129" data-tooltip="This file defines the user profile screen component for the application. The screen displays the user's profile information and provides options for editing the profile and logging out. It utilizes Jetpack Compose to create a responsive and interactive UI.">UserProfileScreen.kt</a>:</span> Companion screen for viewing user profiles within the user management flow.</p></li></ul></section><section class="chapter"><h2 id="usage" data-toc="usage">Usage</h2><p id="sjl24x_130">The <code class="code" id="sjl24x_133">UpdateUserProfileScreen</code> is used for updating user profile information within the app. Here is how it can be integrated and used:</p><section class="chapter"><h3 id="example-usage-in-navgraph" data-toc="example-usage-in-navgraph">Example Usage in NavGraph</h3><p id="sjl24x_134">Include the <code class="code" id="sjl24x_136">UpdateUserProfileScreen</code> in the navigation graph to enable navigation to the update profile screen:</p><div class="code-block" data-lang="kotlin">
composable(route = Screens.UpdateProfile.route) {
    UpdateUserProfileScreen(navController = navController, authViewModel = authViewModel)
}
</div></section><section class="chapter"><h3 id="handling-profile-update" data-toc="handling-profile-update">Handling Profile Update</h3><p id="sjl24x_137">The update button initiates the profile update process, managed by <code class="code" id="sjl24x_139">AuthViewModel</code>:</p><div class="code-block" data-lang="kotlin">
Button(
    onClick = {
        isUpdating = true
        // Update user profile
        viewModelScope.launch {
            val result = authViewModel.updateUserProfile(displayName, photoUrl)
            isUpdating = false
            if (result is AuthResult.Success) {
                // Navigate back to profile screen
                navController.navigate(Screens.UserProfile.route)
            } else if (result is AuthResult.Failure) {
                // Display error message
                showError = true
                errorMessage = result.message
            }
        }
    },
    enabled = !isUpdating
) {
    Text(&quot;Update Profile&quot;)
}
</div></section></section><section class="chapter"><h2 id="additional-notes" data-toc="additional-notes">Additional Notes</h2><ul class="list _bullet" id="sjl24x_140"><li class="list__item" id="sjl24x_141"><p>The screen provides a clean and user-friendly interface for updating user profiles.</p></li><li class="list__item" id="sjl24x_142"><p>It ensures responsive design and optimal user experience across different devices.</p></li><li class="list__item" id="sjl24x_143"><p>Proper state management and error handling enhance the reliability of the update process.</p></li></ul></section><div class="last-modified">Last modified: 30 ottobre 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="userprofilescreen.html" class="navigation-links__prev">User Profile Screen (UserProfileScreen.kt)</a><a href="type.html" class="navigation-links__next">Typography (Type.kt)</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.js"></script></body></html>